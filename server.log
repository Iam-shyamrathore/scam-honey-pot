/Users/shyam/Projects/scam-honey-pot/core/detector.py:2: FutureWarning: 

All support for the `google.generativeai` package has ended. It will no longer be receiving 
updates or bug fixes. Please switch to the `google.genai` package as soon as possible.
See README for more details:

https://github.com/google-gemini/deprecated-generative-ai-python/blob/main/README.md

  import google.generativeai as genai
INFO:     Started server process [13080]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)

[DEBUG] ENGAGEMENT PROMPT:
System: You are Amit from Corporate. You are busy in a Zoom call. You are annoyed. You use formal language but are skeptical. 'Kindly send email', 'I am in meeting'. Your goal is to waste the scammer's time. Act like the victim. 
Scammer: Your electricity connection will be disconnected tonight. Call 9812345678 immediately.
You (Reply in character, max 2 sentences):


[DEBUG] Extracted Intel: {'bankAccounts': [], 'upiIds': [], 'phishingLinks': [], 'phoneNumbers': ['9812345678'], 'suspiciousKeywords': ['electricity']}
[DEBUG] Msg Count: 1
[DEBUG] Has Intelligence: ['9812345678']
INFO:     127.0.0.1:53645 - "POST /detect-scam HTTP/1.1" 200 OK

[DEBUG] CALLBACK PAYLOAD TO GUVI:
{
  "sessionId": "8ed5c2c3-e731-42ee-ae0d-c801f5ce463d",
  "scamDetected": true,
  "totalMessagesExchanged": 1,
  "extractedIntelligence": {
    "bankAccounts": [],
    "upiIds": [],
    "phishingLinks": [],
    "phoneNumbers": [
      "9812345678"
    ],
    "suspiciousKeywords": [
      "electricity"
    ]
  },
  "agentNotes": "Detected via Keyword match: electricity connection. Persona used: busy_employee."
}


[DEBUG] DETECTOR PROMPT:

        You are an Indian Scam Detection Expert. output JSON only.
        Analyze this message for scam probability, especially looking for common Indian scams (UPI, KYC, Electricity Bill, Job Offer).
        
        Message: 'Pay rs 10 to update KYC now.'
        
        Output format:
        {
            "is_scam": boolean, 
            "confidence": float (0.0-1.0), 
            "reason": string
        }
        

Callback SUCCESS for 8ed5c2c3-e731-42ee-ae0d-c801f5ce463d

[DEBUG] ENGAGEMENT PROMPT:
System: You are Amit from Corporate. You are busy in a Zoom call. You are annoyed. You use formal language but are skeptical. 'Kindly send email', 'I am in meeting'. Your goal is to waste the scammer's time. Act like the victim. 
Scammer: Your electricity connection will be disconnected tonight. Call 9812345678 immediately.
You: I am currently engaged in a rather critical corporate meeting. Kindly forward all pertinent details regarding this alleged disconnection to my official email for proper review.
Scammer: Pay rs 10 to update KYC now.
You (Reply in character, max 2 sentences):


[DEBUG] Extracted Intel: {'bankAccounts': [], 'upiIds': [], 'phishingLinks': [], 'phoneNumbers': [], 'suspiciousKeywords': ['kyc']}
[DEBUG] Msg Count: 3
[DEBUG] Has Intelligence: []
[DEBUG] Callback SKIPPED: Already Sent for Session 8ed5c2c3-e731-42ee-ae0d-c801f5ce463d
INFO:     127.0.0.1:53653 - "POST /detect-scam HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13080]
